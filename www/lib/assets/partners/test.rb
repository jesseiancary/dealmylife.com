require "net/http"{crlf}require "json/add/rails"{crlf}{crlf}module Api{crlf}  protected{crlf}  {crlf}  def self.get_deals(url, key, address){crlf}    {crlf}    location = Geocode.get_location(address){crlf}    {crlf}    url << "deals?client_id=" << key << "&lat=" << location["lat"].to_s << "&lng=" << location["lng"].to_s{crlf}    response = Net::HTTP.get_response(URI.parse(url)).body{crlf}    {crlf}    response = JSON.parse(response){crlf}    if response.has_key? "Error"{crlf}       raise "web service error"{crlf}    end{crlf}    {crlf}    return response{crlf}    {crlf}  end{crlf}  {crlf}end
